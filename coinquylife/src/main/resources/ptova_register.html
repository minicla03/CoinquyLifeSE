<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Registrazione Utente</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 400px; margin: auto; padding: 20px; }
        input, button { width: 100%; margin-bottom: 10px; padding: 8px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>

<h2>Registrazione Utente</h2>
<form id="registerForm" method="POST">
    <input type="text" name="nome" placeholder="Nome" required />
    <input type="text" name="cognome" placeholder="Cognome" required />
    <input type="text" name="username" placeholder="Username" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="password" name="password" placeholder="Password" required />
    <button type="submit">Registrati</button>
</form>

<div id="message"></div>

<script>
    const form = document.getElementById('registerForm');
    const messageDiv = document.getElementById('message');

    form.addEventListener('submit', function (e) {
        e.preventDefault(); // Evita il refresh della pagina

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        fetch('http://localhost:8080/rest/auth/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(response => {
                if (!response.ok) throw new Error('Errore nella registrazione');
                return response.json();
            })
            .then(result => {
                messageDiv.textContent = "Registrazione completata!";
                messageDiv.className = "success";
                form.reset();
            })
            .catch(error => {
                messageDiv.textContent = error.message;
                messageDiv.className = "error";
            });
    });
</script>

</body>
</html>
